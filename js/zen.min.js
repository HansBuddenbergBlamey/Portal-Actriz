$(document).ready(function(){function t(){"play"!=e?(e="play",$("#zen").addClass("play"),a.jPlayer("play")):($("#zen .circle").removeClass("rotate"),$("#zen").removeClass("play"),e="pause",a.jPlayer("pause"))}function r(e){var n=3.6*e+"deg";$("#zen .progress").css({rotate:n})}function s(e){var n=3.6*e+"deg";$("#zen .buffer").css({rotate:n})}function i(e,n){var a=o,t=a.offset(),r=e-t.left-a.width()/2,s=n-t.top-a.height()/2,i=Math.atan2(s,r);i>-1*Math.PI&&i<-.5*Math.PI&&(i=2*Math.PI+i);var u=(i+Math.PI/2)/2*Math.PI*10;return u}var e="stop",n=!1,a=$("#zen .player");a.jPlayer({ready:function(){$(this).jPlayer("setMedia",{mp3:"audio/ximena_marchant_REEL.mp3"})},swfPath:"",supplied:"m4a, mp3, oga"}),a.bind($.jPlayer.event.progress,function(){var n=$("#zen audio").get(0),a=0;void 0!=n.buffered&&0!=n.buffered.length&&(a=parseInt(n.buffered.end(0)/n.duration*100,10),s(a),a>=99&&$("#zen .buffer").addClass("loaded"))}),a.bind($.jPlayer.event.timeupdate,function(e){var a=e.jPlayer.status.currentPercentAbsolute;n||r(a)}),a.bind($.jPlayer.event.ended,function(){$("#zen .circle").removeClass("rotate"),$("#zen").removeClass("play"),$("#zen .progress").css({rotate:"0deg"}),e="stop"}),$("#zen .button").bind("mousedown",function(){$(this).bind("mouseleave",function(){$(this).unbind("mouseleave"),t()})}),$("#zen .button").bind("mouseup",function(){$(this).unbind("mouseleave"),t()});var o=$("#zen .drag");o.grab({onstart:function(){n=!0,$("#zen .button").css("pointer-events","none")},onmove:function(e){var n=i(e.position.x,e.position.y);a.jPlayer("playHead",n).jPlayer("play"),r(n)},onfinish:function(e){n=!1;var t=i(e.position.x,e.position.y);a.jPlayer("playHead",t).jPlayer("play"),$("#zen .button").css("pointer-events","auto")}})});
